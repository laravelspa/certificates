import{b as fe,x as C,$ as ve,ac as $e,n as me,h as ge,g as he,j as Y,a0 as pe,N as z,D as k,p as N,ad as ye,ae as Re,k as A,af as D,A as G,q as be,f as p,R as g,ag as Ee,ah as Pe,i as Q,a9 as U}from"./app.3d0443e2.js";import{a as xe}from"./focus-manager.387b0375.js";import{r as Ce,i as we,a as Oe,b as Ve,u as je,e as _e,s as Ae,m as Ie,c as Le,d as Se,f as Fe,g as qe,h as Te,v as ke}from"./index.esm.0660b863.js";var rt=fe({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:s,emit:a}){const n=Y(),r=C(null);let i=0;const m=[];function u(o){const t=typeof o=="boolean"?o:e.noErrorFocus!==!0,c=++i,l=(b,P)=>{a("validation"+(b===!0?"Success":"Error"),P)},y=b=>{const P=b.validate();return typeof P.then=="function"?P.then(E=>({valid:E,comp:b}),E=>({valid:!1,comp:b,err:E})):Promise.resolve({valid:P,comp:b})};return(e.greedy===!0?Promise.all(m.map(y)).then(b=>b.filter(P=>P.valid!==!0)):m.reduce((b,P)=>b.then(()=>y(P).then(E=>{if(E.valid===!1)return Promise.reject(E)})),Promise.resolve()).catch(b=>[b])).then(b=>{if(b===void 0||b.length===0)return c===i&&l(!0),!0;if(c===i){const{comp:P,err:E}=b[0];if(E!==void 0&&console.error(E),l(!1,P),t===!0){const _=b.find(({comp:j})=>typeof j.focus=="function"&&pe(j.$)===!1);_!==void 0&&_.comp.focus()}}return!1})}function $(){i++,m.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function d(o){o!==void 0&&z(o);const t=i+1;u().then(c=>{t===i&&c===!0&&(e.onSubmit!==void 0?a("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function f(o){o!==void 0&&z(o),a("reset"),k(()=>{$(),e.autofocus===!0&&e.noResetFocus!==!0&&v()})}function v(){xe(()=>{if(r.value===null)return;const o=r.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(r.value.querySelectorAll("[tabindex]"),t=>t.tabIndex>-1);o!=null&&o.focus({preventScroll:!0})})}N(ye,{bindComponent(o){m.push(o)},unbindComponent(o){const t=m.indexOf(o);t>-1&&m.splice(t,1)}});let h=!1;return ve(()=>{h=!0}),$e(()=>{h===!0&&e.autofocus===!0&&v()}),me(()=>{e.autofocus===!0&&v()}),Object.assign(n.proxy,{validate:u,resetValidation:$,submit:d,reset:f,focus:v,getValidationComponents:()=>m}),()=>ge("form",{class:"q-form",ref:r,onSubmit:d,onReset:f},he(s.default))}});function W(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((a,n)=>(s.includes(n)||(a[n]=g(e[n])),a),{})}function L(e){return typeof e=="function"}function Ne(e){return Ee(e)||Pe(e)}function Z(e,s,a){let n=e;const r=s.split(".");for(let i=0;i<r.length;i++){if(!n[r[i]])return a;n=n[r[i]]}return n}function T(e,s,a){return p(()=>e.some(n=>Z(s,n,{[a]:!1})[a]))}function H(e,s,a){return p(()=>e.reduce((n,r)=>{const i=Z(s,r,{[a]:!1})[a]||[];return n.concat(i)},[]))}function ee(e,s,a,n){return e.call(n,g(s),g(a),n)}function te(e){return e.$valid!==void 0?!e.$valid:!e}function De(e,s,a,n,r,i,m){let{$lazy:u,$rewardEarly:$}=r,d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],f=arguments.length>8?arguments[8]:void 0,v=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0;const o=C(!!n.value),t=C(0);a.value=!1;const c=A([s,n].concat(d,h),()=>{if(u&&!n.value||$&&!v.value&&!a.value)return;let l;try{l=ee(e,s,f,m)}catch(y){l=Promise.reject(y)}t.value++,a.value=!!t.value,o.value=!1,Promise.resolve(l).then(y=>{t.value--,a.value=!!t.value,i.value=y,o.value=te(y)}).catch(y=>{t.value--,a.value=!!t.value,i.value=y,o.value=!0})},{immediate:!0,deep:typeof s=="object"});return{$invalid:o,$unwatch:c}}function Be(e,s,a,n,r,i,m,u){let{$lazy:$,$rewardEarly:d}=n;const f=()=>({}),v=p(()=>{if($&&!a.value||d&&!u.value)return!1;let h=!0;try{const o=ee(e,s,m,i);r.value=o,h=te(o)}catch(o){r.value=o}return h});return{$unwatch:f,$invalid:v}}function Ge(e,s,a,n,r,i,m,u,$,d,f){const v=C(!1),h=e.$params||{},o=C(null);let t,c;e.$async?{$invalid:t,$unwatch:c}=De(e.$validator,s,v,a,n,o,r,e.$watchTargets,$,d,f):{$invalid:t,$unwatch:c}=Be(e.$validator,s,a,n,o,r,$,d);const l=e.$message;return{$message:L(l)?p(()=>l(W({$pending:v,$invalid:t,$params:W(h),$model:s,$response:o,$validator:i,$propertyPath:u,$property:m}))):l||"",$params:h,$pending:v,$invalid:t,$response:o,$unwatch:c}}function Me(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=g(e),a=Object.keys(s),n={},r={},i={};let m=null;return a.forEach(u=>{const $=s[u];switch(!0){case L($.$validator):n[u]=$;break;case L($):n[u]={$validator:$};break;case u==="$validationGroups":m=$;break;case u.startsWith("$"):i[u]=$;break;default:r[u]=$}}),{rules:n,nestedValidators:r,config:i,validationGroups:m}}function ze(){}const Qe="__root";function ne(e,s,a){if(a)return s?s(e()):e();try{var n=Promise.resolve(e());return s?n.then(s):n}catch(r){return Promise.reject(r)}}function Ue(e,s){return ne(e,ze,s)}function We(e,s){var a=e();return a&&a.then?a.then(s):s(a)}function He(e){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];try{return Promise.resolve(e.apply(this,s))}catch(n){return Promise.reject(n)}}}function Je(e,s,a,n,r,i,m,u,$){const d=Object.keys(e),f=n.get(r,e),v=C(!1),h=C(!1),o=C(0);if(f){if(!f.$partial)return f;f.$unwatch(),v.value=f.$dirty.value}const t={$dirty:v,$path:r,$touch:()=>{v.value||(v.value=!0)},$reset:()=>{v.value&&(v.value=!1)},$commit:()=>{}};return d.length?(d.forEach(c=>{t[c]=Ge(e[c],s,t.$dirty,i,m,c,a,r,$,h,o)}),t.$externalResults=p(()=>u.value?[].concat(u.value).map((c,l)=>({$propertyPath:r,$property:a,$validator:"$externalResults",$uid:`${r}-externalResult-${l}`,$message:c,$params:{},$response:null,$pending:!1})):[]),t.$invalid=p(()=>{const c=d.some(l=>g(t[l].$invalid));return h.value=c,!!t.$externalResults.value.length||c}),t.$pending=p(()=>d.some(c=>g(t[c].$pending))),t.$error=p(()=>t.$dirty.value?t.$pending.value||t.$invalid.value:!1),t.$silentErrors=p(()=>d.filter(c=>g(t[c].$invalid)).map(c=>{const l=t[c];return G({$propertyPath:r,$property:a,$validator:c,$uid:`${r}-${c}`,$message:l.$message,$params:l.$params,$response:l.$response,$pending:l.$pending})}).concat(t.$externalResults.value)),t.$errors=p(()=>t.$dirty.value?t.$silentErrors.value:[]),t.$unwatch=()=>d.forEach(c=>{t[c].$unwatch()}),t.$commit=()=>{h.value=!0,o.value=Date.now()},n.set(r,e,t),t):(f&&n.set(r,e,t),t)}function Ke(e,s,a,n,r,i,m){const u=Object.keys(e);return u.length?u.reduce(($,d)=>($[d]=B({validations:e[d],state:s,key:d,parentKey:a,resultsCache:n,globalConfig:r,instance:i,externalResults:m}),$),{}):{}}function Xe(e,s,a){const n=p(()=>[s,a].filter(t=>t).reduce((t,c)=>t.concat(Object.values(g(c))),[])),r=p({get(){return e.$dirty.value||(n.value.length?n.value.every(t=>t.$dirty):!1)},set(t){e.$dirty.value=t}}),i=p(()=>{const t=g(e.$silentErrors)||[],c=n.value.filter(l=>(g(l).$silentErrors||[]).length).reduce((l,y)=>l.concat(...y.$silentErrors),[]);return t.concat(c)}),m=p(()=>{const t=g(e.$errors)||[],c=n.value.filter(l=>(g(l).$errors||[]).length).reduce((l,y)=>l.concat(...y.$errors),[]);return t.concat(c)}),u=p(()=>n.value.some(t=>t.$invalid)||g(e.$invalid)||!1),$=p(()=>n.value.some(t=>g(t.$pending))||g(e.$pending)||!1),d=p(()=>n.value.some(t=>t.$dirty)||n.value.some(t=>t.$anyDirty)||r.value),f=p(()=>r.value?$.value||u.value:!1),v=()=>{e.$touch(),n.value.forEach(t=>{t.$touch()})},h=()=>{e.$commit(),n.value.forEach(t=>{t.$commit()})},o=()=>{e.$reset(),n.value.forEach(t=>{t.$reset()})};return n.value.length&&n.value.every(t=>t.$dirty)&&v(),{$dirty:r,$errors:m,$invalid:u,$anyDirty:d,$error:f,$pending:$,$touch:v,$reset:o,$silentErrors:i,$commit:h}}function B(e){const s=He(function(){return q(),We(function(){if(l.$rewardEarly)return M(),Ue(k)},function(){return ne(k,function(){return new Promise(R=>{if(!F.value)return R(!S.value);const O=A(F,()=>{R(!S.value),O()})})})})});let{validations:a,state:n,key:r,parentKey:i,childResults:m,resultsCache:u,globalConfig:$={},instance:d,externalResults:f}=e;const v=i?`${i}.${r}`:r,{rules:h,nestedValidators:o,config:t,validationGroups:c}=Me(a),l=Object.assign({},$,t),y=r?p(()=>{const R=g(n);return R?g(R[r]):void 0}):n,V=Object.assign({},g(f)||{}),b=p(()=>{const R=g(f);return r?R?g(R[r]):void 0:R}),P=Je(h,y,r,u,v,l,d,b,n),E=Ke(o,y,v,u,l,d,b),_={};c&&Object.entries(c).forEach(R=>{let[O,w]=R;_[O]={$invalid:T(w,E,"$invalid"),$error:T(w,E,"$error"),$pending:T(w,E,"$pending"),$errors:H(w,E,"$errors"),$silentErrors:H(w,E,"$silentErrors")}});const{$dirty:j,$errors:re,$invalid:S,$anyDirty:se,$error:oe,$pending:F,$touch:q,$reset:ie,$silentErrors:ue,$commit:M}=Xe(P,E,m),le=r?p({get:()=>g(y),set:R=>{j.value=!0;const O=g(n),w=g(f);w&&(w[r]=V[r]),D(O[r])?O[r].value=R:O[r]=R}}):null;r&&l.$autoDirty&&A(y,()=>{j.value||q();const R=g(f);R&&(R[r]=V[r])},{flush:"sync"});function ce(R){return(m.value||{})[R]}function de(){D(f)?f.value=V:Object.keys(V).length===0?Object.keys(f).forEach(R=>{delete f[R]}):Object.assign(f,V)}return G(Object.assign({},P,{$model:le,$dirty:j,$error:oe,$errors:re,$invalid:S,$anyDirty:se,$pending:F,$touch:q,$reset:ie,$path:v||Qe,$silentErrors:ue,$validate:s,$commit:M},m&&{$getResultsForChild:ce,$clearExternalResults:de,$validationGroups:_},E))}class Ye{constructor(){this.storage=new Map}set(s,a,n){this.storage.set(s,{rules:a,result:n})}checkRulesValidity(s,a,n){const r=Object.keys(n),i=Object.keys(a);return i.length!==r.length||!i.every(u=>r.includes(u))?!1:i.every(u=>a[u].$params?Object.keys(a[u].$params).every($=>g(n[u].$params[$])===g(a[u].$params[$])):!0)}get(s,a){const n=this.storage.get(s);if(!n)return;const{rules:r,result:i}=n,m=this.checkRulesValidity(s,a,r),u=i.$unwatch?i.$unwatch:()=>({});return m?i:{$dirty:i.$dirty,$partial:!0,$unwatch:u}}}const I={COLLECT_ALL:!0,COLLECT_NONE:!1},J=Symbol("vuelidate#injectChildResults"),K=Symbol("vuelidate#removeChildResults");function Ze(e){let{$scope:s,instance:a}=e;const n={},r=C([]),i=p(()=>r.value.reduce((f,v)=>(f[v]=g(n[v]),f),{}));function m(f,v){let{$registerAs:h,$scope:o,$stopPropagation:t}=v;t||s===I.COLLECT_NONE||o===I.COLLECT_NONE||s!==I.COLLECT_ALL&&s!==o||(n[h]=f,r.value.push(h))}a.__vuelidateInjectInstances=[].concat(a.__vuelidateInjectInstances||[],m);function u(f){r.value=r.value.filter(v=>v!==f),delete n[f]}a.__vuelidateRemoveInstances=[].concat(a.__vuelidateRemoveInstances||[],u);const $=Q(J,[]);N(J,a.__vuelidateInjectInstances);const d=Q(K,[]);return N(K,a.__vuelidateRemoveInstances),{childResults:i,sendValidationResultsToParent:$,removeValidationResultsFromParent:d}}function ae(e){return new Proxy(e,{get(s,a){return typeof s[a]=="object"?ae(s[a]):p(()=>s[a])}})}let X=0;function st(e,s){var a;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(n=e,e=void 0,s=void 0);let{$registerAs:r,$scope:i=I.COLLECT_ALL,$stopPropagation:m,$externalResults:u,currentVueInstance:$}=n;const d=$||((a=Y())===null||a===void 0?void 0:a.proxy),f=d?d.$options:{};r||(X+=1,r=`_vuelidate_${X}`);const v=C({}),h=new Ye,{childResults:o,sendValidationResultsToParent:t,removeValidationResultsFromParent:c}=d?Ze({$scope:i,instance:d}):{childResults:C({})};if(!e&&f.validations){const l=f.validations;s=C({}),Re(()=>{s.value=d,A(()=>L(l)?l.call(s.value,new ae(s.value)):l,y=>{v.value=B({validations:y,state:s,childResults:o,resultsCache:h,globalConfig:n,instance:d,externalResults:u||d.vuelidateExternalResults})},{immediate:!0})}),n=f.validationsConfig||n}else{const l=D(e)||Ne(e)?e:G(e||{});A(l,y=>{v.value=B({validations:y,state:s,childResults:o,resultsCache:h,globalConfig:n,instance:d!=null?d:{},externalResults:u})},{immediate:!0})}return d&&(t.forEach(l=>l(v,{$registerAs:r,$scope:i,$stopPropagation:m})),be(()=>c.forEach(l=>l(r)))),p(()=>Object.assign({},g(v.value),o.value))}const{createI18nMessage:et}=ke,x=et({t:U.global.t.bind(U)}),ot=x(Ce,{messagePath:()=>"validations.required"});x(we,{messagePath:()=>"validations.integer"});x(Oe,{messagePath:()=>"validations.alpha"});x(Ve,{messagePath:()=>"validations.alphaNum"});x(je,{messagePath:()=>"validations.url"});const it=x(_e,{messagePath:()=>"validations.email"}),ut=x(Ae,{withArguments:!0,messagePath:()=>"validations.sameAs"}),lt=x(Ie,{withArguments:!0,messagePath:()=>"validations.minLength"}),ct=x(Le,{withArguments:!0,messagePath:()=>"validations.maxLength"}),dt=x(Se,{withArguments:!0,messagePath:()=>"validations.requiredIf"});x(Fe,{withArguments:!0,messagePath:()=>"validations.requiredUnless"});x(qe,{withArguments:!0,messagePath:()=>"validations.minValue"});x(Te,{withArguments:!0,messagePath:()=>"validations.maxValue"});export{rt as Q,ct as a,dt as b,it as e,lt as m,ot as r,ut as s,st as u};
