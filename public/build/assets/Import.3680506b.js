import{x as B,ab as I,A as S,f as N,o as s,c as m,w as o,ar as T,a8 as A,a as l,V as t,a6 as i,R as e,S as x,as as g,a2 as c,ao as p,aq as _}from"./app.3d0443e2.js";import{a as E,Q as f}from"./QCard.8d93a297.js";import{Q as R,a as y}from"./QTable.2b6fe4cf.js";import{A as $,$ as D,T as F}from"./vue-csv-import.esm.76b47ecd.js";import"./use-dark.46133ca7.js";import"./QList.995e0fcb.js";import"./QSelect.639ca693.js";import"./use-key-composition.68005297.js";import"./uid.fa5a297c.js";import"./focus-manager.387b0375.js";import"./QItemSection.4f5690cc.js";import"./QItemLabel.65ad92c8.js";import"./QMenu.06d5990f.js";import"./position-engine.10c506f8.js";import"./selection.c3b8e743.js";import"./focusout.fcf09816.js";import"./QDialog.70fc69ea.js";import"./use-prevent-scroll.c93d91aa.js";import"./use-form.ae068b8e.js";import"./format.865294d5.js";import"./QCheckbox.f712fdb1.js";import"./use-checkbox.1380f23c.js";import"./use-fullscreen.b42a56c7.js";const L={class:"row items-center justify-center"},M={class:"col-lg-6 col-md-12 col-xs-12 flex justify-center items-center"},U={class:"col-12"},z={class:"text-h5"},G={class:"col-lg-6 col-md-12 col-xs-12 flex justify-center items-center"},H={class:"col-12"},J={class:"clickable bg-black text-white q-pa-md"},K={class:"q-pa-sm col-12"},O={class:"text-center"},P={class:"text-center"},W={class:"text-center text-weight-bolder"},X={class:"text-center text-weight-bolder"},Y={class:"text-weight-bolder"},Z={class:"text-left text-negative text-weight-bolder"},Ct={__name:"Import",setup(tt){const a=B(null),b=T(),{t:r}=I(),w=S({name:{required:!0,label:r("name")},is_draft:{required:!1,label:r("is_draft")}}),n=A(),k=async()=>{await n.dispatch("certificate/importCsv",a.value),a.value=null,n.state.errors=[],b.push({name:"certificate.list"})},C=()=>{a.value=null,n.state.errors=[],b.push({name:"certificate.list"})},h=N(()=>n.getters.getErrors,{root:!0});return(q,d)=>(s(),m(E,{flat:"",style:{"max-width":"800px","margin-left":"auto","margin-right":"auto","border-radius":"20px"}},{default:o(()=>[l(f,null,{default:o(()=>[t("div",L,[t("div",M,[t("div",U,[t("div",z,i(e(r)("card.import_csv")),1)])]),t("div",G,[t("div",H,[l(x,{label:e(r)("action.cancel"),color:"negative",onClick:d[0]||(d[0]=()=>C()),class:"q-mr-md"},null,8,["label"]),l(x,{label:e(r)("action.save"),type:"submit",color:"positive",onClick:k,disabled:!a.value},null,8,["label","disabled"])])])])]),_:1}),l(f,{class:"flex justify-center items-center col-12"},{default:o(()=>[l(e($),{modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=u=>a.value=u),fields:w},{default:o(()=>[t("label",null,[l(e(D),{class:"bg-black q-pa-lg w-full"}),t("span",J,i(q.$t("action.choose_your_file")),1)]),l(e(F))]),_:1},8,["modelValue","fields"])]),_:1}),t("div",K,[a.value?(s(),m(R,{key:0,flat:"",bordered:"",separator:"cell",dense:"",rows:a.value.slice(1),"row-key":"name"},null,8,["rows"])):g("",!0)]),e(h)?(s(),m(f,{key:0,class:"flex justify-center items-center col-12"},{default:o(()=>[l(y,{flat:"",bordered:"",separator:"cell"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",O,i(e(r)("name")),1),t("th",P,i(e(r)("table.validation_errors")),1)])]),t("tbody",null,[(s(!0),c(_,null,p(e(h),(u,v)=>(s(),c("tr",{key:v},[t("td",W,i(v),1),t("td",X,[l(y,{flat:"",bordered:"",separator:"cell"},{default:o(()=>[t("tbody",null,[(s(!0),c(_,null,p(u,(Q,V)=>(s(),c("tr",null,[t("td",Y,i(V),1),(s(!0),c(_,null,p(Q,j=>(s(),c("tr",null,[t("td",Z,i(j),1)]))),256))]))),256))])]),_:2},1024)])]))),128))])]),_:1})]),_:1})):g("",!0)]),_:1}))}};export{Ct as default};
