import{Q as q,a as de}from"./QCard.8d93a297.js";import{ab as ie,ar as ne,aa as me,x as A,a_ as pe,f as Q,a8 as ue,a7 as F,k as ce,o as _,c as be,w as m,a,R as e,T as g,V as s,a6 as x,a4 as U,O as M,S as N,a2 as C,aq as T,ao as z,b5 as E,b6 as H}from"./app.3d0443e2.js";import{Q as G}from"./QToggle.f83700e9.js";import{Q as J,a as K}from"./QPopupProxy.4d26eed0.js";import{Q as ge}from"./QTree.a18da351.js";import{r as I,m as B,a as j,b as L,s as ve,e as fe,u as qe,Q as xe}from"./i18n-validators.a07dc84a.js";import{C as W}from"./ClosePopup.eea12898.js";import{j as V}from"./index.esm.0660b863.js";import{c as _e}from"./countries.78ffa676.js";import{c as Ve,a as we,b as ye,d as he,g as $e,e as ke,l as Ue}from"./constraints.e9615d87.js";import{C as Ce,F as Ie,a as u,S as X,b as Y,c as Z,A as ee,d as Be,e as je,R as Ae}from"./import.36533b1a.js";import"./use-dark.46133ca7.js";import"./use-checkbox.1380f23c.js";import"./use-form.ae068b8e.js";import"./format.865294d5.js";import"./QDialog.70fc69ea.js";import"./use-prevent-scroll.c93d91aa.js";import"./selection.c3b8e743.js";import"./position-engine.10c506f8.js";import"./focus-manager.387b0375.js";import"./focusout.fcf09816.js";import"./QMenu.06d5990f.js";import"./QCheckbox.f712fdb1.js";const Qe={class:"row q-col-gutter-md q-mt-xs"},Le={class:"col-12"},Re={class:"text-h5 text-white bg-primary q-pa-md"},Se={class:"col-lg-9 col-md-12 col-xs-12 q-px-md q-pb-sm"},Oe={class:"col-12"},De={class:"text-h5 bg-primary text-white q-pa-md"},Pe={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},Fe={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},Me={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},Ne={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},Te={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},ze={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},Ee={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},He={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},Ge={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},Je={class:"row items-center justify-end"},Ke={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},We={class:"row items-center justify-end"},Xe={class:"col-lg-12 col-md-12 col-xs-12 q-px-md q-pb-sm"},Ye={class:"col-12"},Ze={class:"text-h5 bg-primary text-white q-pa-md"},eo={class:"col-lg-12 col-md-12 col-xs-12 q-px-md q-pb-md"},oo={class:"col-lg-12 col-md-12 col-xs-12 q-px-md q-pb-md"},so={class:"col-12"},lo={class:"text-h5 text-white bg-primary q-pa-md"},ao={class:"row justify-between items-center q-pt-lg"},to={class:"q-px-md q-pb-sm col-lg-6 col-md-6 col-xs-12"},ro={class:"q-px-md q-pb-sm col-lg-6 col-md-6 col-xs-12"},io={class:"q-px-md q-pb-sm col-lg-6 col-md-6 col-xs-12"},no={class:"col-lg-6 col-md-6 col-xs-12 text-center"},mo={class:"col-12"},po={class:"text-h5 text-white bg-primary q-pa-md"},uo={class:"row items-center q-pt-lg"},co={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},bo={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},go={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},vo={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},fo={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},qo={class:"col-lg-6 col-md-6 col-xs-12 q-px-md q-pb-sm"},xo={class:"col-lg-12 col-md-12 col-xs-12 text-center"},_o={class:"col-12"},Vo={class:"text-h5 text-white bg-primary q-pa-md"},wo={class:"row items-center q-pt-lg"},yo={class:"col-12 q-px-md q-pb-md"},Go={__name:"Form",props:{formData:{type:Object,required:!0,default:()=>{}}},async setup(oe){let w,y;const se=oe,le=p=>{var o;return(o=_e.find(b=>(b==null?void 0:b.countryName)===l.value.locations[p].country))==null?void 0:o.regions},{t:d}=ie(),R=ne(),h=me(),$=A(!0),k=A(!0),{formData:l}=pe(se),ae=Q(()=>({username:{required:I,minLength:B(8),maxLength:j(100)},firstname:{minLength:B(3),maxLength:j(50)},lastname:{minLength:B(3),maxLength:j(50)},password:{requiredIfRef:L(!h.params.id),containsUppercase:V.withMessage(d("validations.contains_uppercase",{property:"password"}),Ve),containsLowercase:V.withMessage(d("validations.contains_lowercase",{property:"password"}),we),containsNumber:V.withMessage(d("validations.contains_number",{property:"password"}),ye),containsSpecial:V.withMessage(d("validations.contains_special",{property:"password"}),he),minLength:B(8),maxLength:j(100)},password_confirmation:{requiredIfRef:L(!h.params.id),sameAsPassword:V.withMessage(d("validations.sameAs",{property:"password",other:"password_confirmation"}),ve(l.value.password))},email:{email:fe,requiredIfRef:L(l.value.send_notify)},gender:{required:I},is_active:{required:I},send_notify:{required:I}})),r=qe(ae,l),f=ue();[w,y]=F(()=>f.dispatch("role/fetchOptions")),await w,y();const S=Q(()=>f.getters["role/getOptions"]);[w,y]=F(()=>f.dispatch("permission/fetchOptions")),await w,y();const O=Q(()=>f.getters["permission/getOptions"]),D=A(O.value),te=Object.assign([],[...l.value.permissions]);ce(()=>l.value.roles,p=>{var b;l.value.permissions=[...te];const o=(b=S.value.find(c=>p.includes(c.id)))==null?void 0:b.permissions;D.value=O.value.map(c=>({...c,disabled:!1,children:c.children.map(t=>({...t,disabled:!1}))})).filter(c=>(c.children.filter(t=>{o&&o.includes(t.name)&&(t.disabled=!0,l.value.permissions.push(t.name))}),c))},{immediate:!0});const P=async()=>{!await r.value.$validate()||(h.params.id&&(await f.dispatch("user/updateUser",l.value),R.push({name:"user.list"})),h.params.id||(await f.dispatch("user/createUser",l.value),R.push({name:"user.list"})))},re=p=>{l.value.locations[p].city=""};return(p,o)=>(_(),be(de,{class:"bg-transparent",flat:"",style:{"max-width":"800px","margin-left":"auto","margin-right":"auto","border-radius":"20px"}},{default:m(()=>{var b,c;return[a(e(Ce),{onOnSubmit:P,module:"user",reference:(b=e(l))==null?void 0:b.username,"item-id":(c=e(l))==null?void 0:c.id,class:g(p.$q.dark.isActive?"bg-dark":"bg-white")},null,8,["reference","item-id","class"]),a(xe,{onSubmit:P},{default:m(()=>[s("div",Qe,[a(q,{class:"col-lg-12 col-md-12 col-xs-12 q-px-none q-pb-none"},{default:m(()=>[s("div",Le,[s("div",Re,x(e(d)("card.image")),1)]),s("div",{class:g(["row justify-center q-pt-lg",p.$q.dark.isActive?"bg-dark":"bg-white"]),style:{"min-height":"165px"}},[s("div",Se,[a(e(Ie),{object:e(l),namespace:"formData","key-of-images":"avatar"},null,8,["object"])])],2)]),_:1}),a(q,{class:"col-lg-12 col-md-12 col-xs-12 q-px-none q-pb-none"},{default:m(()=>[s("div",Oe,[s("div",De,x(e(d)("card.basic_info")),1)]),s("div",{class:g(["row justify-between q-py-lg",p.$q.dark.isActive?"bg-dark":"bg-white"])},[s("div",Pe,[a(e(u),{modelValue:e(l).username,"onUpdate:modelValue":o[0]||(o[0]=t=>e(l).username=t),label:e(d)("username"),error:e(r).username.$error,onInput:o[1]||(o[1]=()=>e(r).username.$touch()),onBlur:o[2]||(o[2]=()=>e(r).username.$touch()),errors:e(r).username.$errors},null,8,["modelValue","label","error","errors"])]),s("div",Fe,[a(e(u),{modelValue:e(l).email,"onUpdate:modelValue":o[3]||(o[3]=t=>e(l).email=t),label:e(d)("email"),type:"email",error:e(r).email.$error,onInput:o[4]||(o[4]=()=>e(r).email.$touch()),onBlur:o[5]||(o[5]=()=>e(r).email.$touch()),errors:e(r).email.$errors},null,8,["modelValue","label","error","errors"])]),s("div",Me,[a(e(u),{modelValue:e(l).firstname,"onUpdate:modelValue":o[6]||(o[6]=t=>e(l).firstname=t),label:e(d)("firstname"),error:e(r).firstname.$error,onInput:o[7]||(o[7]=()=>e(r).firstname.$touch()),onBlur:o[8]||(o[8]=()=>e(r).firstname.$touch()),errors:e(r).firstname.$errors},null,8,["modelValue","label","error","errors"])]),s("div",Ne,[a(e(u),{modelValue:e(l).lastname,"onUpdate:modelValue":o[9]||(o[9]=t=>e(l).lastname=t),label:e(d)("lastname"),error:e(r).lastname.$error,onInput:o[10]||(o[10]=()=>e(r).lastname.$touch()),onBlur:o[11]||(o[11]=()=>e(r).lastname.$touch()),errors:e(r).lastname.$errors},null,8,["modelValue","label","error","errors"])]),s("div",Te,[a(e(u),{modelValue:e(r).password.$model,"onUpdate:modelValue":o[13]||(o[13]=t=>e(r).password.$model=t),label:e(d)("password"),error:e(r).password.$error,onInput:o[14]||(o[14]=()=>e(r).password.$touch()),onBlur:o[15]||(o[15]=()=>e(r).password.$touch()),errors:e(r).password.$errors,type:$.value?"password":"text"},{append:m(()=>[a(U,{name:$.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[12]||(o[12]=t=>$.value=!$.value)},null,8,["name"])]),_:1},8,["modelValue","label","error","errors","type"])]),s("div",ze,[a(e(u),{modelValue:e(r).password_confirmation.$model,"onUpdate:modelValue":o[17]||(o[17]=t=>e(r).password_confirmation.$model=t),label:e(d)("password_confirmation"),error:e(r).password_confirmation.$error,onInput:o[18]||(o[18]=()=>e(r).password_confirmation.$touch()),onBlur:o[19]||(o[19]=()=>e(r).password_confirmation.$touch()),errors:e(r).password_confirmation.$errors,type:k.value?"password":"text"},{append:m(()=>[a(U,{name:k.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[16]||(o[16]=t=>k.value=!k.value)},null,8,["name"])]),_:1},8,["modelValue","label","error","errors","type"])]),s("div",Ee,[a(e(X),{modelValue:e(l).gender,"onUpdate:modelValue":o[20]||(o[20]=t=>e(l).gender=t),label:e(d)("gender"),options:e($e),error:e(r).gender.$error,errors:e(r).gender.$errors,onInput:o[21]||(o[21]=()=>e(r).gender.$touch()),onBlur:o[22]||(o[22]=()=>e(r).gender.$touch())},null,8,["modelValue","label","options","error","errors"])]),s("div",He,[a(G,{"keep-color":"",modelValue:e(l).is_active,"onUpdate:modelValue":o[23]||(o[23]=t=>e(l).is_active=t),label:e(d)("is_active"),error:e(r).is_active.$error,onInput:o[24]||(o[24]=()=>e(r).is_active.$touch()),onBlur:o[25]||(o[25]=()=>e(r).is_active.$touch())},null,8,["modelValue","label","error"])]),s("div",Ge,[a(e(Y),{modelValue:e(l).date_of_birth,"onUpdate:modelValue":o[27]||(o[27]=t=>e(l).date_of_birth=t),label:e(d)("date_of_birth")},{append:m(()=>[a(U,{name:"event",class:"cursor-pointer"},{default:m(()=>[a(J,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:m(()=>[a(K,{modelValue:e(l).date_of_birth,"onUpdate:modelValue":o[26]||(o[26]=t=>e(l).date_of_birth=t)},{default:m(()=>[s("div",Je,[M(a(N,{label:"Close",color:"primary",flat:""},null,512),[[W]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"])]),s("div",Ke,[a(e(Y),{modelValue:e(l).date_of_joining,"onUpdate:modelValue":o[29]||(o[29]=t=>e(l).date_of_joining=t),label:e(d)("date_of_joining")},{append:m(()=>[a(U,{name:"event",class:"cursor-pointer"},{default:m(()=>[a(J,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:m(()=>[a(K,{modelValue:e(l).date_of_joining,"onUpdate:modelValue":o[28]||(o[28]=t=>e(l).date_of_joining=t)},{default:m(()=>[s("div",We,[M(a(N,{label:"Close",color:"primary",flat:""},null,512),[[W]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"])]),s("div",Xe,[a(G,{"keep-color":"",modelValue:e(l).send_notify,"onUpdate:modelValue":o[30]||(o[30]=t=>e(l).send_notify=t),label:e(d)("send_notify"),error:e(r).send_notify.$error,onInput:o[31]||(o[31]=()=>e(r).send_notify.$touch()),onBlur:o[32]||(o[32]=()=>e(r).send_notify.$touch())},null,8,["modelValue","label","error"])])],2)]),_:1}),a(q,{class:"col-lg-12 col-md-12 col-xs-12 q-px-none q-pb-none"},{default:m(()=>[s("div",Ye,[s("div",Ze,x(e(d)("card.priviliges")),1)]),s("div",{class:g(["row justify-center q-pt-lg",p.$q.dark.isActive?"bg-dark":"bg-white"])},[s("div",eo,[a(e(X),{modelValue:e(l).roles,"onUpdate:modelValue":o[33]||(o[33]=t=>e(l).roles=t),clearable:"",label:e(d)("roles"),options:e(S),multiple:"","stack-label":"","use-input":"","input-debounce":"0"},null,8,["modelValue","label","options"])]),s("div",oo,[a(ge,{class:"col-12 col-sm-6",nodes:D.value,"node-key":"name","label-key":"name","tick-strategy":"leaf",ticked:e(l).permissions,"onUpdate:ticked":o[34]||(o[34]=t=>e(l).permissions=t)},null,8,["nodes","ticked"])])],2)]),_:1}),a(q,{class:"col-lg-12 col-md-12 col-xs-12 q-px-none q-pb-none"},{default:m(()=>{var t;return[s("div",so,[s("div",lo,x(e(d)("card.contacts")),1)]),(_(!0),C(T,null,z((t=e(l))==null?void 0:t.contacts,(i,v)=>(_(),C("div",{key:v,class:g(p.$q.dark.isActive?"bg-dark":"bg-white")},[s("div",ao,[s("div",to,[a(e(u),{rounded:"",outlined:"",label:e(d)("mobile"),modelValue:i.mobile,"onUpdate:modelValue":n=>i.mobile=n},null,8,["label","modelValue","onUpdate:modelValue"])]),s("div",ro,[a(e(u),{modelValue:i.phone,"onUpdate:modelValue":n=>i.phone=n,label:e(d)("phone")},null,8,["modelValue","onUpdate:modelValue","label"])]),s("div",io,[a(e(u),{modelValue:i.email,"onUpdate:modelValue":n=>i.email=n,label:e(d)("email"),type:"email"},null,8,["modelValue","onUpdate:modelValue","label"])]),s("div",no,[a(e(Z),{onClick:()=>e(E)(e(l),"contacts",v),class:"q-mb-lg"},null,8,["onClick"])])])],2))),128)),s("div",{class:g(["col-lg-12 col-md-12 col-xs-12 q-py-lg text-center",p.$q.dark.isActive?"bg-dark":"bg-white"])},[a(e(ee),{onClick:o[35]||(o[35]=()=>e(H)(e(l),"contacts",e(ke)))})],2)]}),_:1}),a(q,{class:"col-lg-12 col-md-12 col-xs-12 q-px-none q-pb-none"},{default:m(()=>{var t;return[s("div",mo,[s("div",po,x(e(d)("card.locations")),1)]),(_(!0),C(T,null,z((t=e(l))==null?void 0:t.locations,(i,v)=>(_(),C("div",{key:v,class:g(p.$q.dark.isActive?"bg-dark":"bg-white")},[s("div",uo,[s("div",co,[a(e(Be),{modelValue:i.country,"onUpdate:modelValue":[n=>i.country=n,n=>re(v)],label:e(d)("country"),location:i},null,8,["modelValue","onUpdate:modelValue","label","location"])]),s("div",bo,[a(e(je),{modelValue:i.city,"onUpdate:modelValue":n=>i.city=n,label:e(d)("city"),options:le(v),location:i},null,8,["modelValue","onUpdate:modelValue","label","options","location"])]),s("div",go,[a(e(u),{modelValue:i.first_address,"onUpdate:modelValue":n=>i.first_address=n,label:e(d)("first_address")},null,8,["modelValue","onUpdate:modelValue","label"])]),s("div",vo,[a(e(u),{modelValue:i.second_address,"onUpdate:modelValue":n=>i.second_address=n,label:e(d)("second_address")},null,8,["modelValue","onUpdate:modelValue","label"])]),s("div",fo,[a(e(u),{modelValue:i.state,"onUpdate:modelValue":n=>i.state=n,label:e(d)("state")},null,8,["modelValue","onUpdate:modelValue","label"])]),s("div",qo,[a(e(u),{modelValue:i.zip,"onUpdate:modelValue":n=>i.zip=n,label:e(d)("zip")},null,8,["modelValue","onUpdate:modelValue","label"])]),s("div",xo,[a(e(Z),{onClick:()=>e(E)(e(l),"locations",v),class:"q-mb-lg"},null,8,["onClick"])])])],2))),128)),s("div",{class:g(["col-lg-12 col-md-12 col-xs-12 q-py-lg text-center",p.$q.dark.isActive?"bg-dark":"bg-white"])},[a(e(ee),{onClick:o[36]||(o[36]=()=>e(H)(e(l),"locations",e(Ue)))})],2)]}),_:1}),a(q,{class:"col-lg-12 col-md-12 col-xs-12 q-px-none q-pb-none"},{default:m(()=>[s("div",_o,[s("div",Vo,x(e(d)("card.remarks")),1)]),s("div",{class:g(p.$q.dark.isActive?"bg-dark":"bg-white")},[s("div",wo,[s("div",yo,[a(e(Ae),{modelValue:e(l).remarks,"onUpdate:modelValue":o[37]||(o[37]=t=>e(l).remarks=t)},null,8,["modelValue"])])])],2)]),_:1})])]),_:1})]}),_:1}))}};export{Go as default};
